---
slug: velaptor-release-v1.0.0-preview.35
title: Velaptor Release v1.0.0-preview.35
authors: kinson
tags: [releases, velaptor]
---

import URL from "@site/src/components/URL";
import GHProj from "@site/src/components/GHProj";
import ReleaseNotes from "@site/src/components/ReleaseNotes";

Hello again!!  This release is a good one. üòâ

## Quick Overview

This release contains various changes like a bug fix related to flipping images vertically and
horizontally, dependency updates, refactorings, code clean-up, and most importantly, the new stream audio
playback feature inherited from <GHProj owner="KInsonDigital" projName="CASL"/>.

The Velaptor release _**v1.0.0-preview.35**_ also contains some breaking changes related to the public API.
These breaking changes are necessary and help solidify the public API before the final release of version `v1.0.0`.

This release is a good one. ü§òüèª

:::info Release Notes
Check out the <ReleaseNotes projName="Velaptor" version="v1.0.0-preview.25"/>!!
:::


Let's get into the details!!

## Bug Fix

The bug fix in this release is related to flipping images vertically and horizontally when using
the `ImageData` struct.  If you were using a variable of type `ImageData` in the past where the creation
of the variable when using the default constructor or the `default` keyword, and you tried to flip
the image using the `FlipHorizontally()` or `FlipVertically()` methods, then you would get an exception.

Here is an example of the code that would throw an exception:
```csharp
// ImageData imgData = default; üëàüèª or this
// var imgData = new ImageData(); üëàüèª or this
var imgData = default(ImageData); üëàüèª or this

imgData.FlipHorizontally(); üëàüèª Would cause an exception
imgData.FlipVertically(); üëàüèª Would cause an exception
```

## Dependency Updates

The main dependency update was an update to the latest version of <GHProj owner="KInsonDigital" projName="CASL"/>.
We will get into this later.

:::info CASL Release Notes
If you want the details, check out the <ReleaseNotes projName="CASL" version="v1.0.0-preview.18"/>.
:::

Another dependency update was upgrading <GHProj owner="KinsonDigital" projName="Carbonate"/> from version _**v1.0.0-preview.16**_ to _**v1.0.0-preview.18**_.


## Refactorings and Code Clean-up

As always, we are continuously looking for ways to improve the codebase. This release contains code cleanup in areas such
as the main Velaptor project, the unit tests, spelling and grammar throughout the code docs, and more.

The improvement of the code docs directly impacts the developer experience as well as on the <URL link="https://docs.velaptor.io/docs" text="API documentation"/>.


## API Changes

The breaking changes in this release are related to the public API. The changes are necessary to make the API more consistent,
easy to use, and as less confusing as possible.

### Removal of concrete loader types

This change is about being more opinionated and producing less confusion for the user when it comes to loading content.
Currently, when loading content, the best and easiest way to load content is by using the `ContentLoaderFactory` to create
the content loader of the desired type to be used throughout the lifetime of the scene and then use that loader to load
that specific kind of content.

Let's show you an example:
```csharp
public override void LoadContent()
{
    // Most common way to load content
    this.textureLoader = ContentLoaderFactory.CreateTextureLoader();
    this.texture = this.textureLoader.Load("my-texture");
}
```

Another way that you "could" of loaded content is by creating a loader object manually.
```csharp
public override void LoadContent()
{
    // Used to be able to do this, but not anymore
    this.textureLoader = new TextureLoader();
    this.texture = this.textureLoader.Load("my-texture");
}
```

We are getting close but have not reached _**v1.0.0**_ yet. The _**NEED**_ for creating loader objects directly is not necessary
and it is better to have APIs closed and then opened up as needed and for good reason.  This practice helps keep the API
more consistent as well as reduce breaking changes.

### Sound class changes

1. We have changed the name of the `Sound` class to `Audio` and the `ISound` interface to `IAudio`. This change better reflects the purpose of the class as
well as better alignment with the latest version of the CASL library.
    ```csharp
    // Before v1.0.0-preview.35
    var music = new Sound("my-music.ogg");


    // After v1.0.0-preview.35
    this.audioLoader = ContentLoaderFactory.CreateAudioLoader();

    var music = this.audioLoader.Load("my-music.ogg", AudioBuffer.Stream);
    // or 
    var music = this.audioLoader.Load("my-music.ogg", AudioBuffer.Full);
    ```

2. We have also changed the data type of the `Position` and `Length` properties to `TimeSpan`.  Using `TimeSpan` means using what is provided by dotnet instead
of creating and maintaining a type to represent time.  The previous type `SoundTime` was a type from _**CASL**_ and was not intended to be exposed or used
in _**Velaptor**_.  The data type change provides more power and flexibility `TimeSpan` API vs the old `SoundTime` API that was used before.

3. We have replaced the `State` property from the `ISound` interface and `Sound` class with the following bool properties to represent the state of the audio.
   - `IsPlaying`
   - `IsPaused`
   - `IsStopped`
   - The `State` property was removed due to the unintentional exposure of the _**CASL**_ API.
    ```csharp
    // Before v1.0.0-preview.35
    var music = new Sound("my-music.ogg");
    var isPlaying = music.State == AudioState.Playing;
    var isPaused = music.State == AudioState.Paused;
    var isStopped = music.State == AudioState.Stopped;

    // After v1.0.0-preview.35
    this.audioLoader = ContentLoaderFactory.CreateAudioLoader();
    var music = this.audioLoader.Load("my-music.ogg", AudioBuffer.Stream);
    
    var isPlaying = music.IsPlaying;
    var isPaused = music.IsPaused;
    var isStopped = music.IsStopped;
    ```


4. We removed the `Reset()` method.  The functionality provided by this method is the same as the `Stop()` method and was unnecessary.  Both methods were introduced 
when we first brought _**CASL**_ into __**Velaptor**__.  In the world of <URL link="https://openal.org/" text="OpenAL"/>, there is a difference
between the different operation types, and they were brought into the API by mistake.  When it comes to user expectations and experience, a single method is the better way to go.

5. We removed the `public` constructor from the `Audio` class. (Used to be `Sound`).
This was done to further reduce different ways to load content and keep the API opinionated and consistent.

### Naming Changes

We went through the entire code base and refactored all types and code docs using the terms `Sound` and `Sounds` and replaced them with `Audio`.
Here is a list on the naming changes we did on various types and methods:

1. Refactored the name of the `LoadSoundException` to `LoadAudioException`

2. Refactored the name of the `SoundLoader` class to `AudioLoader`

3. Refactored the name of the `PathResolverFactory.CreateSoundPathResolver()` method to `PathResolverFactory.CreateAudioPathResolver()`

4. Refactored the name of the `ContentLoaderFactory.CreateSoundLoader()` method to `ContentLoaderFactory.CreateAudioLoader()`

5. Refactored the `ILoader<IAudio>.Unload()` method parameter named `sound` to `audio`.

## Default Audio Content Folder

The default name of the content folder where _**Velaptor**_ will search of audio content has been changed from `Sounds` to `Audio`.
Again, as we get closer to `v1.0.0`, we are starting to make changes that make more sense to how the entire library works and to
the expectations of its users.

Before:  
![asdf](./images/before-casl-update.jpg)

After:  
![asdf](./images/after-casl-update.jpg)

---

# Check List

## TODO: Talk about the sound folder being changed to audio PR 936
## TODO: Add content about removing the public constructors from the texture class.  Issue not complete yet.


[!Warning]
Introduced https://github.com/KinsonDigital/Velaptor/labels/%F0%9F%A7%A8breaking%20changes
1. ‚úÖRenamed the `ISound` interface to `IAudio`.
2. ‚úÖRenamed the `Sound` class to `Audio`.
3. ‚úÖChanged the data type of the `Position` and `Length` properties to `TimeSpan`.
4. ‚úÖReplaced the `State` property from the `ISound` interface and `Sound` class with the following bool properties to represent the state of the audio.
   - `IsPlaying`
   - `IsPaused`
   - `IsStopped`
   - The `State` property was removed due to the unintentional exposure of the _**CASL**_ API.
5. ‚úÖRemoved the `Reset()` method from the `ISound` interface and `Sound` class.  This method was performing the same operation as the `Stop()` method.
6. ‚úÖRemoved the `public` constructor from the `Sound` class.
   - This was done to force users to use the content loader system.
7. ‚úÖRefactored the name of the `LoadSoundException` to `LoadAudioException`
8. ‚úÖRefactored the name of the `SoundLoader` class to `AudioLoader`
9. ‚úÖRefactored the name of the `PathResolverFactory.CreateSoundPathResolver()` method to `PathResolverFactory.CreateAudioPathResolver()`
10. ‚úÖRefactored the name of the `ContentLoaderFactory.CreateSoundLoader()` method to `ContentLoaderFactory.CreateAudioLoader()`
11. ‚úÖThe default name of the content folder `Sound` which is where audio content is located has been changed to `Audio`
12. ‚úÖRefactored the `ILoader<IAudio>.Unload()` method parameter named `sound` to `audio`.
